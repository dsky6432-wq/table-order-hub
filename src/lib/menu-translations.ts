export type MenuLang = "sr" | "en" | "de" | "it" | "fr";

export const LANGUAGES: { code: MenuLang; label: string; flag: string }[] = [
  { code: "sr", label: "Srpski", flag: "ğŸ‡·ğŸ‡¸" },
  { code: "en", label: "English", flag: "ğŸ‡¬ğŸ‡§" },
  { code: "de", label: "Deutsch", flag: "ğŸ‡©ğŸ‡ª" },
  { code: "it", label: "Italiano", flag: "ğŸ‡®ğŸ‡¹" },
  { code: "fr", label: "FranÃ§ais", flag: "ğŸ‡«ğŸ‡·" },
];

const translations: Record<MenuLang, Record<string, string>> = {
  sr: {
    table: "Sto",
    other: "Ostalo",
    emptyMenu: "Meni je trenutno prazan.",
    yourCart: "VaÅ¡a korpa",
    paymentMethod: "NaÄin plaÄ‡anja",
    cash: "Gotovina",
    card: "Kartica",
    notePlaceholder: "Napomena (opciono)...",
    sendOrder: "PoÅ¡alji porudÅ¾binu",
    sending: "Å alje se...",
    orderSent: "PorudÅ¾bina poslata!",
    orderReceived: "VaÅ¡a porudÅ¾bina za Sto {table} je primljena. Restoran je obaveÅ¡ten.",
    orderAgain: "NaruÄi ponovo",
    menuNotFound: "Meni nije pronaÄ‘en",
    invalidQR: "QR kod je nevaÅ¾eÄ‡i ili je istekao.",
    loading: "UÄitavanje menija...",
    menu: "Meni",
  },
  en: {
    table: "Table",
    other: "Other",
    emptyMenu: "The menu is currently empty.",
    yourCart: "Your cart",
    paymentMethod: "Payment method",
    cash: "Cash",
    card: "Card",
    notePlaceholder: "Note (optional)...",
    sendOrder: "Send order",
    sending: "Sending...",
    orderSent: "Order sent!",
    orderReceived: "Your order for Table {table} has been received. The restaurant has been notified.",
    orderAgain: "Order again",
    menuNotFound: "Menu not found",
    invalidQR: "The QR code is invalid or has expired.",
    loading: "Loading menu...",
    menu: "Menu",
  },
  de: {
    table: "Tisch",
    other: "Sonstiges",
    emptyMenu: "Die Speisekarte ist derzeit leer.",
    yourCart: "Ihr Warenkorb",
    paymentMethod: "Zahlungsmethode",
    cash: "Bargeld",
    card: "Karte",
    notePlaceholder: "Anmerkung (optional)...",
    sendOrder: "Bestellung senden",
    sending: "Wird gesendet...",
    orderSent: "Bestellung gesendet!",
    orderReceived: "Ihre Bestellung fÃ¼r Tisch {table} wurde empfangen. Das Restaurant wurde benachrichtigt.",
    orderAgain: "Erneut bestellen",
    menuNotFound: "Speisekarte nicht gefunden",
    invalidQR: "Der QR-Code ist ungÃ¼ltig oder abgelaufen.",
    loading: "Speisekarte wird geladen...",
    menu: "Speisekarte",
  },
  it: {
    table: "Tavolo",
    other: "Altro",
    emptyMenu: "Il menÃ¹ Ã¨ attualmente vuoto.",
    yourCart: "Il tuo carrello",
    paymentMethod: "Metodo di pagamento",
    cash: "Contanti",
    card: "Carta",
    notePlaceholder: "Nota (opzionale)...",
    sendOrder: "Invia ordine",
    sending: "Invio in corso...",
    orderSent: "Ordine inviato!",
    orderReceived: "Il tuo ordine per il Tavolo {table} Ã¨ stato ricevuto. Il ristorante Ã¨ stato avvisato.",
    orderAgain: "Ordina di nuovo",
    menuNotFound: "MenÃ¹ non trovato",
    invalidQR: "Il codice QR non Ã¨ valido o Ã¨ scaduto.",
    loading: "Caricamento menÃ¹...",
    menu: "MenÃ¹",
  },
  fr: {
    table: "Table",
    other: "Autre",
    emptyMenu: "Le menu est actuellement vide.",
    yourCart: "Votre panier",
    paymentMethod: "Mode de paiement",
    cash: "EspÃ¨ces",
    card: "Carte",
    notePlaceholder: "Note (facultatif)...",
    sendOrder: "Envoyer la commande",
    sending: "Envoi en cours...",
    orderSent: "Commande envoyÃ©e !",
    orderReceived: "Votre commande pour la Table {table} a Ã©tÃ© reÃ§ue. Le restaurant a Ã©tÃ© informÃ©.",
    orderAgain: "Commander Ã  nouveau",
    menuNotFound: "Menu introuvable",
    invalidQR: "Le code QR est invalide ou a expirÃ©.",
    loading: "Chargement du menu...",
    menu: "Menu",
  },
};

export const t = (lang: MenuLang, key: string, vars?: Record<string, string | number>) => {
  let text = translations[lang]?.[key] || translations.sr[key] || key;
  if (vars) {
    Object.entries(vars).forEach(([k, v]) => {
      text = text.replace(`{${k}}`, String(v));
    });
  }
  return text;
};
